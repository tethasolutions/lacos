<div class="k-overlay" *ngIf="opened"></div>

<div class="k-window-wrapper" *ngIf="opened">
    <kendo-window (close)="dismiss()" [resizable]="false" [draggable]="false" [width]="500" [top]="150">
        <kendo-window-titlebar>
            <div class="k-window-title">
                Nuovo Movimento Magazzino
            </div>
            <div class="text-right">
                <button type="button" (click)="dismiss()" class="btn btn-secondary me-2">
                    <i class="fa fa-rotate-left me-2"></i> ANNULLA
                </button>
                <button type="button" (click)="close()" class="btn btn-primary">
                    <i class="fa fa-floppy-disk me-2"></i> SALVA
                </button>
            </div>
            <button kendoWindowCloseAction></button>
        </kendo-window-titlebar>
        <form name="movementForm" #form="ngForm" novalidate autocomplete="off" (ngSubmit)="close()" *ngIf="options">

            <div class="row">
                <div class="col-12">
                    <label>Prodotto</label>
                    <div class="form-group">
                        <input class="form-control" [disabled]="true" [value]="productName"/>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <label>Tipo Movimento</label>
                    <div class="form-group movement-type-selector">
                        <div class="btn-group w-100" role="group">
                            <button type="button"
                                class="btn btn-lg"
                                [class.btn-success]="options.movementType === 1"
                                [class.btn-outline-success]="options.movementType !== 1"
                                (click)="options.movementType = 1">
                                <i class="fas fa-arrow-down me-2"></i> CARICO
                            </button>
                            <button type="button"
                                class="btn btn-lg"
                                [class.btn-danger]="options.movementType === 2"
                                [class.btn-outline-danger]="options.movementType !== 2"
                                (click)="options.movementType = 2">
                                <i class="fas fa-arrow-up me-2"></i> SCARICO
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <label>Data Movimento</label>
                    <div class="form-group">
                        <kendo-datepicker name="movementDate" [(ngModel)]="options.movementDate"
                            [format]="'dd/MM/yyyy'" required>
                        </kendo-datepicker>
                        <div class="validation-message" [control]="form.controls['movementDate']"></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <label>Quantit√†</label>
                    <div class="form-group">
                        <kendo-numerictextbox name="quantity" [(ngModel)]="options.quantity"
                            [min]="1" [decimals]="0" [format]="'n0'" required>
                        </kendo-numerictextbox>
                        <div class="validation-message" [control]="form.controls['quantity']"></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <label>Note</label>
                    <div class="form-group">
                        <textarea class="form-control" name="notes" [(ngModel)]="options.notes"
                            rows="3" maxlength="500"></textarea>
                    </div>
                </div>
            </div>

            <div class="text-right mt-4">
                <button type="button" (click)="dismiss()" class="btn btn-secondary me-2">
                    <i class="fa fa-rotate-left me-2"></i> ANNULLA
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fa fa-floppy-disk me-2"></i> SALVA
                </button>
            </div>
        </form>
    </kendo-window>
</div>
